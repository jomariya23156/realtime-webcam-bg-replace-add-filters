<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        #gallery-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            max-width: 600px;
            margin: auto;
        }

        .image {
            width: 200px;
            height: 200px;
            cursor: pointer;
            border: 2px solid #ccc;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }

        .image:hover {
            border-color: #3498db;
        }

        .upload-placeholder {
            width: 200px;
            height: 200px;
            border: 2px dashed #ccc;
            box-sizing: border-box;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: border-color 0.3s ease;
        }

        .upload-placeholder:hover {
            border-color: #3498db;
        }

        #file-input {
            display: none;
        }

        #preview-container {
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
        }

        #preview-container img {
            max-width: 100%;
            height: auto;
            margin-top: 10px;
            border: 2px solid #3498db;
            box-sizing: border-box;
        }
    </style>
</head>
<body>

<div id="gallery-container">
    <div class="image" onclick="selectImage('image1.jpeg')" id="image1">
        <img src="image1.jpeg" alt="Image 1" style="width: 100%; height: 100%;">
    </div>
    <div class="image" onclick="selectImage('image2.jpeg')" id="image2">
        <img src="image2.jpeg" alt="Image 2" style="width: 100%; height: 100%;">
    </div>
    <div class="image" onclick="selectImage('image3.jpeg')" id="image3">
        <img src="image3.jpeg" alt="Image 3" style="width: 100%; height: 100%;">
    </div>
    <label class="upload-placeholder" for="file-input">
        <span>Upload Image</span>
        <input type="file" id="file-input" accept="image/*" onchange="uploadImage(event)">
    </label>
</div>

<div id="preview-container"></div>

<script>
    function selectImage(imageUrl) {
        // Remove the border from all images
        document.querySelectorAll('.image').forEach(img => img.classList.remove('selected-image'));

        // Handle the selected image (e.g., display it or perform any other action)
        console.log('Selected Image: ' + imageUrl);
        displayPreview(imageUrl);

        // Add a border to the selected image
        const selectedImage = document.getElementById(imageUrl);
        if (selectedImage) {
            selectedImage.classList.add('selected-image');
        }
    }

    function uploadImage(event) {
        const fileInput = event.target;
        const file = fileInput.files[0];

        if (file) {
            // Perform any client-side processing with the uploaded file
            const reader = new FileReader();
            reader.onload = function (e) {
                const imageUrl = e.target.result;
                // Display the uploaded image or perform any other action
                console.log('Uploaded Image: ' + imageUrl);
                displayPreview(imageUrl);

                // Now, you can make a POST request to the dummy API endpoint
                const apiUrl = 'http://localhost:8888/predict';
                const formData = new FormData();
                formData.append('image', file);

                fetch(apiUrl, {
                    method: 'POST',
                    body: formData,
                })
                .then(response => response.json())
                .then(data => {
                    console.log('API Response:', data);
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            };

            reader.readAsDataURL(file);
        }
    }

    function displayPreview(imageUrl) {
        const previewContainer = document.getElementById('preview-container');
        const previewImage = document.createElement('img');
        previewImage.src = imageUrl;
        previewContainer.innerHTML = '';
        previewContainer.appendChild(previewImage);
    }
</script>

</body>
</html>
